(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{146:function(e,a,t){e.exports=t(188)},151:function(e,a,t){},188:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(11),l=t.n(i),s=t(4),o=t(36),c=t(37),m=t(40),d=t(38),u=t(9),p=t(52),h=t(15),g=(t(151),t(5)),v=t(3),b=t(17),E=t(232),f=t(88),y=t(43),O=t(236),j=t(265),w=t(240),N=t(242),R=t(234),C=Object(E.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function S(){var e=C();return r.a.createElement("div",{className:e.root},r.a.createElement(R.a,null))}var I=t(18),T=t.n(I),k=function(e){return function(a){a({type:"LOADING_USER"}),T.a.get("/user/".concat(e)).then((function(e){a({type:"SET_USER",payload:e.data})})).catch((function(e){return console.log(e)}))}},A=function(e){var a="Bearer ".concat(e);localStorage.setItem("FBidToken",a),T.a.defaults.headers.common.Authorization=a},x=t(23),D=t(241),F=t(243),_=t(244),L=Object(E.a)((function(e){return{root:Object(u.a)({background:"url('https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/loginBackground.png?alt=media') center/cover no-repeat",padding:"5rem",paddingLeft:"15rem",paddingRight:"15rem",height:"95vh"},e.breakpoints.down("md"),{padding:"1rem"}),paper:{padding:"5%"},form:{"& > *":{margin:e.spacing(1),width:"100%"},padding:"5vh"},button:Object(u.a)({margin:e.spacing(1),width:"20%",marginLeft:"40%",marginRight:"40%"},e.breakpoints.down("md"),{width:"36%",marginLeft:"32%",marginRight:"32%"}),forgotPass:{marginTop:"-3%"},customError:{color:"red",textAlign:"center",marginTop:10}}})),U={loginUser:function(e){return function(a){a({type:"LOADING_UI"}),T.a.post("/login",e).then((function(e){localStorage.userId=e.data.id,A(e.data.token),a(k(e.data.id)),a({type:"CLEAR_ERRORS"}),a({type:"STOP_LOADING_UI"})})).catch((function(e){a({type:"SET_ERRORS_LOGIN",payload:e.response})}))}},registor:function(e,a){return function(a){a({type:"LOADING_UI"}),T.a.post("/registor",e).then((function(e){A(e.data.token),a(k(e.data.id)),a({type:"CLEAR_ERRORS"}),a({type:"STOP_LOADING_UI"})})).catch((function(e){a({type:"SET_ERRORS_REGISTOR",payload:e.response})}))}}},P=Object(x.b)((function(e){return{user:e.user,UI:e.UI}}),U)((function(e){var a=Object(n.useState)(""),t=Object(b.a)(a,2),i=t[0],l=t[1],o=Object(n.useState)(""),c=Object(b.a)(o,2),m=c[0],d=c[1],u=Object(n.useState)(""),p=Object(b.a)(u,2),h=p[0],g=p[1],v=Object(n.useState)("login"),E=Object(b.a)(v,2),R=E[0],C=E[1],I=Object(n.useState)({}),T=Object(b.a)(I,2),k=T[0],A=T[1],x=Object(n.useState)("Initial render"),U=Object(b.a)(x,2),P=U[0],q=U[1],B=L();Object(n.useEffect)((function(){"Initial render"!==P&&(e.UI.loading||(null!==e.UI.errors?A(Object(s.a)(Object(s.a)({},k),{},{login:e.UI.errors})):e.login.setState(Object(s.a)(Object(s.a)({},e.login.state),{},{login:!0}))))}),[e.UI]);var z=function(e){switch(e.target.value.length>30&&(e.target.value=e.target.value.slice(0,30)),e.target.name){case"email":l(e.target.value);break;case"password":d(e.target.value);break;case"confirmPassword":g(e.target.value)}A({})};return r.a.createElement("div",{className:B.root},r.a.createElement(f.a,{className:B.paper,elevation:3},r.a.createElement(y.a,{variant:"h4",align:"center"},"i-Rate"),r.a.createElement(y.a,{variant:"subtitle1",align:"center"},"Place to rate restaurants"),r.a.createElement(O.a,null),"login"===R?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:B.form,noValidate:!0,autoComplete:"off"},k.email?r.a.createElement(j.a,{name:"email",error:!0,label:"Email",type:"email",variant:"outlined",helperText:k.email,onChange:z}):r.a.createElement(j.a,{name:"email",label:"Email",type:"email",variant:"outlined",onChange:z}),k.password?r.a.createElement(j.a,{name:"password",error:!0,label:"Password",type:"password",variant:"outlined",helperText:k.password,onChange:z}):r.a.createElement(j.a,{name:"password",label:"Password",type:"password",variant:"outlined",onChange:z}),r.a.createElement(w.a,{variant:"contained",color:"primary",type:"submit",className:B.button,endIcon:r.a.createElement(D.a,null),onClick:function(a){if(a.preventDefault(),i.match(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/))if(m){var t={email:i,password:m};q("Not initial render"),e.loginUser(t)}else A(Object(s.a)(Object(s.a)({},k),{},{password:"Password is not empty"}));else A(Object(s.a)(Object(s.a)({},k),{},{email:"Email is not valid"}))}},"Login"),k.login&&!k.email&&r.a.createElement(y.a,{variant:"body2",className:B.customError},k.login),e.UI.loading&&r.a.createElement("div",{className:B.spinner}," ",r.a.createElement(S,null))),r.a.createElement(y.a,{className:B.forgotPass,variant:"subtitle1",align:"center"},"Forgot password? ",r.a.createElement("a",{href:"#"},"Click here")),r.a.createElement("br",null),r.a.createElement(y.a,{variant:"h6",align:"center"},"Don't have an account?",r.a.createElement(N.a,{"aria-label":"Registor",color:"primary",onClick:function(){C("registor")}},r.a.createElement(F.a,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:B.form,noValidate:!0,autoComplete:"off"},k.email?r.a.createElement(j.a,{name:"email",error:!0,label:"Email",type:"email",variant:"outlined",helperText:k.email,onChange:z}):r.a.createElement(j.a,{name:"email",label:"Email",type:"email",variant:"outlined",onChange:z}),k.password?r.a.createElement(j.a,{name:"password",error:!0,label:"Password",type:"password",variant:"outlined",helperText:k.password,onChange:z}):r.a.createElement(j.a,{name:"password",label:"Password",type:"password",variant:"outlined",onChange:z}),r.a.createElement(j.a,{name:"confirmPassword",label:"Confirm password",type:"password",variant:"outlined",onChange:z}),r.a.createElement(w.a,{variant:"contained",color:"primary",className:B.button,endIcon:r.a.createElement(F.a,null),onClick:function(a){if(a.preventDefault(),i.match(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/))if(m){var t={email:i,password:m,confirmPassword:h};q("Not initial render"),e.registor(t)}else A(Object(s.a)(Object(s.a)({},k),{},{password:"Password is not empty"}));else A(Object(s.a)(Object(s.a)({},k),{},{email:"Email is not valid"}))},type:"submit"},"Registor"),k.login&&!k.email&&r.a.createElement(y.a,{variant:"body2",className:B.customError},k.login),e.UI.loading&&r.a.createElement("div",{className:B.spinner}," ",r.a.createElement(S,null))),r.a.createElement(y.a,{variant:"h6",align:"center"},"Had an account?",r.a.createElement(N.a,{"aria-label":"Login",color:"primary",onClick:function(e){e.preventDefault(),C("login")}},r.a.createElement(_.a,null))))))})),q=t(110);function B(){var e=Object(q.a)(["\n    min-height: 40vh;\n    background: url(",") center/cover no-repeat;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return B=function(){return e},e}var z=t(111).a.header(B(),(function(e){return e.img})),G=Object(E.a)((function(e){return{banner:{margin:0}}})),M=function(){var e=G();return r.a.createElement("div",{className:e.banner})},H=t(245),W=Object(E.a)((function(e){return{root:{flexGrow:1},paper:Object(u.a)({padding:e.spacing(2),margin:"auto",maxWidth:500,backgroundColor:"transparent"},e.breakpoints.down("sm"),{width:400}),image:Object(u.a)({width:128,height:128},e.breakpoints.down("sm"),{width:110,height:110}),img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},content:{textAlign:"justify"},contentContainer:{marginTop:"auto",marginBottom:"auto"}}})),Q=function(e){var a=e.content,t=e.img,n=e.direction,i=W();return r.a.createElement("div",{className:i.root},r.a.createElement(f.a,{className:i.paper,elevation:0},r.a.createElement(H.a,{container:!0,spacing:2,direction:n},r.a.createElement(H.a,{item:!0,xs:12,sm:5,align:"center"},t),r.a.createElement(H.a,{item:!0,xs:12,sm:7,className:i.contentContainer},r.a.createElement(y.a,{variant:"body2",className:i.content},a)))))},V=t(115),Y=t.n(V),Z=t(116),$=t.n(Z),J=t(117),K=t.n(J),X={data:[{content:"Lorem ipsum dolor, it amet consectetur adipisicing elit. Ipsam voluptas sapiente, deserunt minima laudantium possimus.",img:r.a.createElement(Y.a,{style:{width:100,height:100}}),direction:"row"},{content:"Lorem ipsum dolor, sit amet consecttur adipisicing elit. Ipsam voluptas sapiente, deserunt minima laudantium possimus.",img:r.a.createElement($.a,{style:{width:100,height:100}}),direction:"row"},{content:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ipsam voluptas sapiente, deserunt minima laudantium possimus.",img:r.a.createElement(K.a,{style:{width:100,height:100}}),direction:"row"}]},ee=function(){return r.a.createElement("div",null,r.a.createElement(H.a,{container:!0},X.data.map((function(e){return r.a.createElement(H.a,{item:!0,xs:12,lg:4,key:e.content},r.a.createElement(Q,{content:e.content,direction:e.direction,img:e.img}))}))))},ae=t(81),te=t.n(ae),ne=t(255),re=t(256),ie=t(251),le=t(257),se=t(258),oe=t(269),ce=t(192),me=t(268),de=t(272),ue=t(266),pe=t(246),he=t(250),ge=t(248),ve=t(249),be=t(247),Ee=t(120),fe=t.n(Ee),ye=function(e){var a=e.action,t=e.description,i=e.title,l=e.type,o=e.parent,c=r.a.useState(!1),m=Object(b.a)(c,2),d=m[0],u=m[1],p=function(){u(!1),"update"===l&&o.setState(Object(s.a)(Object(s.a)({},o.state),{},{submit:!1}))},h=function(){a()};return Object(n.useEffect)((function(){"update"===l&&u(!0)}),[]),r.a.createElement("div",null,"delete"===l?r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{title:"Delete",placement:"top"},r.a.createElement(N.a,{"aria-label":"delete",color:"secondary",onClick:function(){u(!0)},style:{width:"15%"}},r.a.createElement(fe.a,null))),r.a.createElement(pe.a,{open:d,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(be.a,{id:"alert-dialog-title",style:{color:"red"}},i),r.a.createElement(ge.a,null,r.a.createElement(ve.a,{id:"alert-dialog-description",style:{color:"black"}},t)),r.a.createElement(he.a,null,r.a.createElement(w.a,{onClick:p,color:"primary"},"No"),r.a.createElement(w.a,{onClick:h,color:"secondary",autoFocus:!0},"Yes")))):r.a.createElement(pe.a,{open:d,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(be.a,{id:"alert-dialog-title",style:{color:"red"}},i),r.a.createElement(ge.a,null,r.a.createElement(ve.a,{id:"alert-dialog-description",style:{color:"black"}},t)),r.a.createElement(he.a,null,r.a.createElement(w.a,{onClick:p,color:"primary"},"No"),r.a.createElement(w.a,{onClick:h,color:"secondary",autoFocus:!0},"Yes"))))},Oe=Object(E.a)((function(e){return{map:{height:"300px",marginTop:"100px"},item:{display:"inline-flex",alignItems:"center"},labelItem:Object(u.a)({width:"20%",fontSize:"1rem"},e.breakpoints.down("md"),{width:"34%"}),fieldItem:Object(u.a)({width:"74%"},e.breakpoints.down("md"),{width:"60%"})}})),je=window.google,we=function(e){var a=e.parent,t=e.address,i=Oe();return Object(n.useEffect)((function(){!function(){var e;e=t?new je.maps.Map(document.getElementById("map"),{center:{lat:t.lat,lng:t.lng},zoom:13}):new je.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13});var n=document.getElementById("pac-card"),r=document.getElementById("pac-input");e.controls[je.maps.ControlPosition.TOP_RIGHT].push(n);var i=new je.maps.places.Autocomplete(r);i.bindTo("bounds",e),i.setFields(["address_components","geometry","icon","name"]);var l,o=new je.maps.InfoWindow,c=document.getElementById("infowindow-content");o.setContent(c),l=t?new je.maps.Marker({map:e,anchorPoint:new je.maps.Point(0,-29),position:{lat:t.lat,lng:t.lng}}):new je.maps.Marker({map:e,anchorPoint:new je.maps.Point(0,-29)});i.addListener("place_changed",(function(){o.close(),l.setVisible(!1);var t=i.getPlace();if(t.geometry){t.geometry.viewport?e.fitBounds(t.geometry.viewport):(e.setCenter(t.geometry.location),e.setZoom(17)),l.setPosition(t.geometry.location),l.setVisible(!0);var n="";t.address_components&&(n=[t.address_components[0]&&t.address_components[0].short_name||"",t.address_components[1]&&t.address_components[1].short_name||"",t.address_components[2]&&t.address_components[2].short_name||""].join(" ")),c.children["place-icon"].src=t.icon,c.children["place-name"].textContent=t.name,c.children["place-address"].textContent=n,o.open(e,l),a.setState(Object(s.a)(Object(s.a)({},a.state),{},{address:{name:r.value,lat:l.getPosition().lat(),lng:l.getPosition().lng()}}))}else window.alert("No details available for input: '"+t.name+"'")}))}()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.item},r.a.createElement("label",{htmlFor:"address",className:i.labelItem},t?"10. Address: ":"8. Address: "),r.a.createElement(j.a,{name:"address",variant:"standard",id:"pac-input",className:i.fieldItem,placeholder:t&&t.name})),r.a.createElement("div",{id:"map",className:i.map,style:{margin:0}}),r.a.createElement("div",{id:"infowindow-content"},r.a.createElement("img",{src:"",width:"16",height:"16",id:"place-icon"}),r.a.createElement("span",{id:"place-name",className:"title"}),r.a.createElement("br",null),r.a.createElement("span",{id:"place-address"})))},Ne=function(){return function(e){e({type:"LOADING_DATA"}),T.a.get("/restaurants").then((function(a){e({type:"SET_RESTAURANTS",payload:a.data}),e({type:"STOP_LOADING_UI"})})).catch((function(a){e({type:"SET_RESTAURANTS",payload:[]})}))}},Re=function(e,a){return function(t){t({type:"LOADING_UI"}),T.a.post("/restaurant/image/".concat(a),e).then((function(e){t(Ce(a)),t({type:"STOP_LOADING_UI"})})).catch((function(e){return console.log(e)}))}},Ce=function(e){return function(a){a({type:"LOADING_DATA"}),T.a.get("/restaurant/".concat(e)).then((function(e){a({type:"SET_RESTAURANT",payload:e.data})})).catch((function(e){return console.log(e)}))}},Se=function(){return function(e){e({type:"CLEAR_ERRORS"})}},Ie={0:"Very bad",1:"Bad",2:"Need to improve",3:"Normal",4:"Good",5:"Excellent"},Te=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={name:"",type:"",visitDate:"",price:0,reporter:"",notes:"Empty",message:"",url:null,uploadedImage:null,errors:{},valueService:0,hoverService:-1,valueCleanliness:0,hoverCleanliness:-1,valueFood:0,hoverFood:-1,submit:!1,address:""},e.handleChange=function(a){a.target.value.length>30?(a.target.value=a.target.value.slice(0,30),e.setState(Object(s.a)(Object(s.a)({},e.state),{},Object(u.a)({},a.target.name,a.target.value)))):e.setState(Object(s.a)(Object(s.a)({},e.state),{},Object(u.a)({},a.target.name,a.target.value)))},e.handleChangeRating=function(a,t){if(t)switch(a.target.name){case"serviceRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueService:t}));break;case"cleanlinessRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueCleanliness:t}));break;case"foodQualityRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueFood:t}))}},e.handleChangeActive=function(a,t){if(-1!==t)switch(a.target.name){case"serviceRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverService:t}));break;case"cleanlinessRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverCleanliness:t}));break;case"foodQualityRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverFood:t}))}},e.handleUpload=function(a){a.preventDefault();var t=a.target.files[0];e.setState(Object(s.a)(Object(s.a)({},e.state),{},{uploadedImage:t}))},e.handleSubmit=function(a){a.preventDefault(),e.setState(Object(s.a)(Object(s.a)({},e.state),{},{submit:!0}))},e.handleUpdate=function(){var a={};if(""===e.state.name?a.name="Name is required!":""===e.state.type&&(a.type="Type is required!"),""===e.state.visitDate&&(a.visitDate="Visited date is required!"),""===e.state.serviceRating&&(a.serviceRating="Service rating is required!"),""===e.state.cleanlinessRating&&(a.cleanlinessRating="Cleanliness rating is required!"),""===e.state.foodQualityRating&&(a.foodQualityRating="Food quality rating is required!"),0===e.state.price&&(a.price="Price is required!"),""===e.state.reporter&&(a.reporter="Reporter is required!"),a.type||a.name||a.price||a.reporter||a.visitDate||a.serviceRating||a.cleanlinessRating||a.foodQualityRating)e.setState(Object(s.a)(Object(s.a)({},e.state),{},{errors:a}));else{var t=Math.round((e.state.valueService+e.state.valueFood+e.state.valueCleanliness)/3),n={name:e.state.name,type:e.state.type,visitDate:e.state.visitDate,serviceRating:Ie[e.state.valueService],cleanlinessRating:Ie[e.state.valueCleanliness],foodQualityRating:Ie[e.state.valueFood],totalRating:Ie[t],price:e.state.price,reporter:e.props.user.credentials.email,notes:e.state.notes,address:e.state.address,url:e.state.url};if(null!==e.state.uploadedImage){var r=new FormData;r.append("image",e.state.uploadedImage,e.state.uploadedImage.name),e.props.uploadImage(r,e.props.restaurant.id),e.props.history.push("/home")}e.props.updateRestaurant(e.props.restaurant.id,n),e.props.history.push("/home")}},e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e=this.props.restaurant,a={},t=0;t<6;t++)e.serviceRating===Ie[t]&&(a.service=t),e.cleanlinessRating===Ie[t]&&(a.cleanliness=t),e.foodQualityRating===Ie[t]&&(a.food=t),5===t&&this.setState(Object(s.a)(Object(s.a)({},this.state),{},{name:e.name,type:e.type,visitDate:e.visitDate,price:e.price,reporter:e.reporter,notes:e.notes,url:e.url,valueService:a.service,hoverService:a.service,valueCleanliness:a.cleanliness,hoverCleanliness:a.cleanliness,valueFood:a.food,hoverFood:a.food,address:e.address}))}},{key:"render",value:function(){var e=this.props.classes;return this.props.data.loading?r.a.createElement(S,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"name",className:e.labelItem},"1. Name*:"),this.state.errors.name?r.a.createElement(j.a,{error:!0,name:"name",helperText:this.state.errors.name,required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem}):r.a.createElement(j.a,{name:"name",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.name,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"type",className:e.labelItem},"2. Type*:"),this.state.errors.type?r.a.createElement(j.a,{name:"type",error:!0,helperText:this.state.errors.type,required:!0,variant:"standard",onChange:this.handleChange,value:this.state.type,className:e.fieldItem}):r.a.createElement(j.a,{name:"type",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.type,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"visitDate",className:e.labelItem},"3. Date*:"),this.state.errors.visitDate?r.a.createElement(j.a,{error:!0,name:"visitDate",helperText:this.state.errors.visitDate,required:!0,variant:"standard",onChange:this.handleChange,type:"date",className:e.fieldItem}):r.a.createElement(j.a,{name:"visitDate",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.visitDate,type:"date",className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"price",className:e.labelItem},"4. Price*:"),this.state.errors.price?r.a.createElement(j.a,{name:"price",error:!0,helperText:this.state.errors.price,type:"number",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.price,className:e.fieldItem}):r.a.createElement(j.a,{name:"price",type:"number",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.price,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"reporter",className:e.labelItem},"5. Reporter*:"),this.state.errors.reporter?r.a.createElement(j.a,{name:"reporter",error:!0,helperText:this.state.errors.reporter,required:!0,variant:"standard",onChange:this.handleChange,value:this.state.reporter,className:e.fieldItem}):r.a.createElement(j.a,{name:"reporter",required:!0,variant:"standard",onChange:this.handleChange,value:this.state.reporter,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"notes",className:e.labelItem},"6. Notes:"),r.a.createElement(j.a,{name:"notes",variant:"standard",onChange:this.handleChange,value:this.state.notes&&this.state.notes,className:e.fieldItem})),r.a.createElement(O.a,{variant:"inset",component:"input",style:{width:"94%"}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"serviceRating",className:e.labelRating},"7. Service rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"serviceRating",value:this.state.valueService,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueService&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Ie[-1!==this.state.hoverService?this.state.hoverService:this.state.valueService])),r.a.createElement("label",{htmlFor:"cleanlinessRating",className:e.labelRating},"8. Cleanliness rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"cleanlinessRating",value:this.state.valueCleanliness,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueCleanliness&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Ie[-1!==this.state.hoverCleanliness?this.state.hoverCleanliness:this.state.valueCleanliness])),r.a.createElement("label",{htmlFor:"foodQualityRating",className:e.labelRating},"9. Food quality rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"foodQualityRating",value:this.state.valueFood,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueFood&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Ie[-1!==this.state.hoverFood?this.state.hoverFood:this.state.valueFood])),r.a.createElement(O.a,{variant:"inset",component:"input",style:{width:"94%"}}),r.a.createElement(we,{parent:this,address:this.state.address}),r.a.createElement(O.a,{variant:"inset",component:"input",style:{width:"94%"}}),r.a.createElement("label",{htmlFor:"image",className:e.labelItem},"11. The image:"),null!==this.state.url&&r.a.createElement(ie.a,{className:e.media,image:this.state.url,onClick:this.handleMediaClick}),r.a.createElement(j.a,{type:"file",name:"image",onChange:this.handleUpload}),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",className:e.button},"Update"),this.props.data.loading&&r.a.createElement(S,null),this.props.UI.errors&&r.a.createElement("h2",null,"Update failed!")),!0===this.state.submit&&r.a.createElement(ye,{parent:this,action:this.handleUpdate.bind(this),description:"Do you want to update this rating?",title:"Update alert!!!",type:"update"}))}}]),t}(n.Component),ke={getOne:Ce,updateRestaurant:function(e,a){return function(t){t({type:"LOADING_DATA"}),T.a.patch("/restaurant/".concat(e),a).then((function(a){var n={restaurant:Object(s.a)(Object(s.a)({},a.data.restaurant),{},{id:e}),message:"Update successfully!"};t({type:"UPDATE_RESTAURANT",payload:n}),t(Se())})).catch((function(e){t({type:"SET_ERRORS",payload:"Update failed!"})}))}},uploadImage:Re},Ae=Object(x.b)((function(e){return{UI:e.UI,user:e.user,data:e.data}}),ke)(Object(g.a)((function(e){return{form:{"& > *":{margin:e.spacing(.5),width:"100%"},padding:"3%"},media:{height:0,paddingTop:"45%"},labelRating:{fontSize:"1rem"},resultRating:{fontWeight:"bold"},contentRating:{display:"flex",paddingLeft:"1em"},item:{display:"inline-flex",alignItems:"center"},labelItem:Object(u.a)({width:"20%",fontSize:"1rem"},e.breakpoints.down("md"),{width:"34%"}),fieldItem:Object(u.a)({width:"74%"},e.breakpoints.down("md"),{width:"60%"}),button:{width:"94%"}}}))(Te)),xe=t(121),De=t.n(xe),Fe=Object(E.a)((function(e){return{form:{"& > *":{margin:e.spacing(1),width:"25ch"}},paper:Object(u.a)({position:"absolute",width:700,height:700,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)"},e.breakpoints.down("md"),{width:300,height:500}),addIcon:{width:"60%",height:"60%",margin:"20%"}}})),_e=function(e){var a=e.restaurant,t=e.history,i=Fe(),l=Object(n.useState)(!1),s=Object(b.a)(l,2),o=s[0],c=s[1],m=r.a.createElement("div",{className:i.paper},r.a.createElement(y.a,{variant:"h4",align:"center",style:{backgroundColor:"black",width:"100%",color:"white",fontWeight:"bold"}},"Update one"),r.a.createElement(Ae,{restaurant:a,history:t}));return r.a.createElement("div",null,r.a.createElement(me.a,{title:"Update and note",placement:"top"},r.a.createElement(N.a,{"aria-label":"update",color:"primary",onClick:function(){c(!0)},style:{width:"15%"}},r.a.createElement(De.a,null))),r.a.createElement(ce.a,{style:{zIndex:5},open:o,onClose:function(){c(!1)}},m))},Le=t(76),Ue=t(273),Pe=t(252),qe=t(253),Be=t(254),ze=Object(E.a)((function(e){var a;return a={root:{width:"100%",display:"flex",position:"absolute",justifyContent:"flex-end",paddingRight:"4%",marginTop:"-15%"}},Object(u.a)(a,e.breakpoints.only("sm"),{root:{marginTop:"-10%"}}),Object(u.a)(a,"emailIcon",{marginLeft:"20%"}),a})),Ge=function(e){var a=e.title,t=e.url,n=ze(),i=Object(Le.Passers)(Object(Le.share)(r.a.createElement(Le.P,{url:t,className:"network__share-button"})))({className:"network"})("li");return r.a.createElement("div",{className:n.root},r.a.createElement(i,null,r.a.createElement(Ue.a,{quote:a},r.a.createElement(Pe.a,{size:"1.5rem",round:!0})),r.a.createElement(qe.a,{subject:a,body:"body",className:n.emailIcon},r.a.createElement(Be.a,{size:"1.5rem",round:!0}))))},Me=Object(E.a)((function(e){return{root:{maxWidth:"500px",marginLeft:"auto",marginRight:"auto",position:"relative"},media:{height:0,paddingTop:"56.25%"},cardActions:{justifyContent:"flex-end"},cardContent:{height:"250px"}}})),He=function(e){var a=e.restaurant,t=e.flag,i=e.deleteRestaurant,l=e.history,s=Me(),o=Object(n.useState)("".concat(a.url)),c=Object(b.a)(o,2),m=c[0],d=(c[1],Object(n.useState)("")),u=Object(b.a)(d,2),p=u[0];u[1];return a?r.a.createElement(ne.a,{className:s.root,raised:!0},r.a.createElement(re.a,{avatar:r.a.createElement(oe.a,{src:"https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/avatar.png?alt=media"}),title:a.name,subheader:te()(a.dateCreate).format("DD/MM/YYYY")}),r.a.createElement(Ge,{url:m,title:p}),r.a.createElement(ie.a,{className:s.media,image:a.url}),r.a.createElement(le.a,{className:s.cardContent},r.a.createElement(y.a,{variant:"h6"},"Details"),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Type: ",a.type),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Visited date: ",te()(a.visitDate).format("DD/MM/YYYY")),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Location: ",a.address?a.address.name:"No information"),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Price: ",a.price),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Total rating: ",a.totalRating),r.a.createElement(y.a,{variant:"subtitle1"},"\xa0\u2022 Reporter: ",a.reporter),"Empty"!==a.notes&&r.a.createElement(y.a,{variant:"subtitle2",color:"secondary"},"\xa0",r.a.createElement("i",null,"*Note: ",a.notes))),"restaurants"===t&&r.a.createElement(se.a,{className:s.cardActions,disableSpacing:!0},r.a.createElement(_e,{restaurant:a,history:l}),r.a.createElement(ye,{action:function(){i(a.id)}.bind(void 0),type:"delete",description:"Do you want to delete this rating?",title:"Delete alert!!!"}))):r.a.createElement(r.a.Fragment,null)},We=Object(E.a)((function(e){return{root:{margin:"2%"},hover:{"&:hover":{opacity:.8}},container:{maxHeight:"1000px",width:"90%",marginLeft:"5%",marginRight:"5%",overflow:"auto"}}})),Qe=function(e){var a=We();return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{variant:"h4",align:"center"},"New rating restaurant"),r.a.createElement("br",null),r.a.createElement(H.a,{container:!0,className:a.container,spacing:3,alignItems:"center"},e.loading&&r.a.createElement(S,null),e.restaurants.map?e.restaurants.map((function(e){return r.a.createElement(H.a,{item:!0,xs:12,md:6,lg:4,className:a.hover,key:e.id+Math.random().toString()},r.a.createElement(He,{restaurant:e,flag:"home"}))})):r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h5",align:"center"},"No existed rating restaurant"))))},Ve=Object(E.a)((function(e){return{root:{backgroundColor:"#3f51b5",padding:"2%"},hover:{"&:hover":{opacity:.8}},title:{color:"white"},container:{maxHeight:"1000px",width:"90%",marginLeft:"5%",marginRight:"5%",overflow:"auto"}}})),Ye=function(e){var a=Ve();return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{variant:"h4",align:"center",className:a.title},"Search result"),r.a.createElement("br",null),r.a.createElement(H.a,{container:!0,className:a.container,spacing:3,alignItems:"center"},e.loading&&r.a.createElement(S,null),0!==e.restaurantsFilter.length&&e.restaurantsFilter.map((function(e){return r.a.createElement(H.a,{item:!0,xs:12,md:6,lg:4,className:a.hover,key:e.id},r.a.createElement(He,{restaurant:e,flag:"restaurants"}))})),0===e.restaurantsFilter.length&&r.a.createElement("h3",{style:{width:"100%",textAlign:"center",color:"white"}},"No matched results")))},Ze=function(){return r.a.createElement(O.a,{style:{marginTop:"3rem",marginBottom:"3rem"}})},$e=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getRestaurants()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{img:"https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/homeBanner.jpg?alt=media"},r.a.createElement(M,null)),r.a.createElement(Ze,null),this.props.app.state.search&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{restaurantsFilter:this.props.data.restaurantsFilter,loading:this.props.data.loading}),r.a.createElement(Ze,null)),r.a.createElement(ee,null),r.a.createElement(Ze,null),r.a.createElement(Qe,{restaurants:this.props.data.restaurants,loading:this.props.data.loading}))}}]),t}(n.Component),Je={getRestaurants:Ne},Ke=Object(x.b)((function(e){return{user:e.user,UI:e.UI,data:e.data}}),Je)($e),Xe={0:"Very bad",1:"Bad",2:"Need to improve",3:"Normal",4:"Good",5:"Excellent"},ea=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={name:"",type:"",visitDate:"",price:0,serviceRating:"",cleanlinessRating:"",foodQualityRating:"",reporter:"",notes:"Empty",url:"",errors:{},valueService:0,hoverService:-1,valueCleanliness:0,hoverCleanliness:-1,valueFood:0,hoverFood:-1,address:"No information"},e.handleChange=function(a){a.target.value.length>30?(a.target.value=a.target.value.slice(0,30),e.setState(Object(s.a)(Object(s.a)({},e.state),{},Object(u.a)({},a.target.name,a.target.value)))):e.setState(Object(s.a)(Object(s.a)({},e.state),{},Object(u.a)({},a.target.name,a.target.value)))},e.handleChangeRating=function(a,t){switch(a.target.name){case"serviceRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueService:t}));break;case"cleanlinessRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueCleanliness:t}));break;case"foodQualityRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{valueFood:t}))}},e.handleChangeActive=function(a,t){switch(a.target.name){case"serviceRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverService:t}));break;case"cleanlinessRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverCleanliness:t}));break;case"foodQualityRating":e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hoverFood:t}))}},e.handleUpload=function(a){a.preventDefault();var t=a.target.files[0],n=new FormData;n.append("image",t,t.name),e.props.uploadImage(n,e.props.data.restaurants[e.props.data.restaurants.length-1].restaurant.id)},e.handleSubmit=function(a){a.preventDefault();var t={count:0};if(""===e.state.name&&(t.name="Name is required!",t.count+=1),""===e.state.type&&(t.type="Type is required!",t.count+=1),""===e.state.visitDate&&(t.visitDate="Visited date is required!",t.count+=1),0===e.state.price&&(t.price="Price is required!",t.count+=1),t.count>0)e.setState(Object(s.a)(Object(s.a)({},e.state),{},{errors:t}));else{var n=Math.round((e.state.valueService+e.state.valueFood+e.state.valueCleanliness)/3),r={name:e.state.name,type:e.state.type,visitDate:e.state.visitDate,serviceRating:Xe[e.state.valueService],cleanlinessRating:Xe[e.state.valueCleanliness],foodQualityRating:Xe[e.state.valueFood],totalRating:Xe[n],price:e.state.price,reporter:e.props.user.credentials.email,notes:e.state.notes,createdDate:(new Date).toISOString(),address:e.state.address};e.props.postRestaurant(r)}},e}return Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState(Object(s.a)(Object(s.a)({},this.state),{},{message:this.props.data.message})),this.props.data.message}},{key:"render",value:function(){var e=this.props.classes;return"Loaded image"===this.props.data.message&&(this.props.closeModel(),this.props.history.push("/home")),r.a.createElement("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"name",className:e.labelItem},"1. Name *:"),this.state.errors.name?r.a.createElement(j.a,{error:!0,name:"name",helperText:this.state.errors.name,required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem}):r.a.createElement(j.a,{name:"name",required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"type",className:e.labelItem},"2. Type *:"),this.state.errors.type?r.a.createElement(j.a,{error:!0,name:"type",helperText:this.state.errors.type,required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem}):r.a.createElement(j.a,{name:"type",required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"visitDate",className:e.labelItem},"3. Date *:"),this.state.errors.visitDate?r.a.createElement(j.a,{error:!0,name:"visitDate",helperText:this.state.errors.visitDate,required:!0,variant:"standard",onChange:this.handleChange,type:"date",InputLabelProps:{shrink:!0},className:e.fieldItem}):r.a.createElement(j.a,{name:"visitDate",required:!0,variant:"standard",type:"date",onChange:this.handleChange,InputLabelProps:{shrink:!0},className:e.fieldItem})),r.a.createElement("div",{className:e.item},r.a.createElement("label",{htmlFor:"price",className:e.labelItem},"4. Price *:"),this.state.errors.price?r.a.createElement(j.a,{error:!0,name:"price",type:"number",helperText:this.state.errors.price,required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem}):r.a.createElement(j.a,{name:"price",type:"number",required:!0,variant:"standard",onChange:this.handleChange,className:e.fieldItem})),r.a.createElement(O.a,{variant:"inset",component:"input",style:{width:"94%"}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"serviceRating",className:e.labelRating},"5. Service rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"serviceRating",value:this.state.valueService,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueService&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Xe[-1!==this.state.hoverService?this.state.hoverService:this.state.valueService])),r.a.createElement("label",{htmlFor:"cleanlinessRating",className:e.labelRating},"6. Cleanliness rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"cleanlinessRating",value:this.state.valueCleanliness,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueCleanliness&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Xe[-1!==this.state.hoverCleanliness?this.state.hoverCleanliness:this.state.valueCleanliness])),r.a.createElement("label",{htmlFor:"foodQualityRating",className:e.labelRating},"7. Food quality rating:"),r.a.createElement("span",{className:e.contentRating},r.a.createElement(de.a,{name:"foodQualityRating",value:this.state.valueFood,precision:1,onChange:this.handleChangeRating,onChangeActive:this.handleChangeActive}),null!==this.state.valueFood&&r.a.createElement(ue.a,{ml:2,className:e.resultRating},Xe[-1!==this.state.hoverFood?this.state.hoverFood:this.state.valueFood])),r.a.createElement(O.a,{variant:"inset",component:"input",style:{width:"94%"}}),r.a.createElement(we,{parent:this}),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",className:e.button},"Create information"),this.state.message&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,"Add restaurant image:"),r.a.createElement(j.a,{type:"file",name:"image",onChange:this.handleUpload})),"Loaded image"===this.props.data.message&&r.a.createElement(y.a,{variant:"body2",className:e.customError},this.props.data.message),this.props.data.loading||this.props.UI.loading&&r.a.createElement(S,null))}}]),t}(n.Component),aa={postRestaurant:function(e){return function(a){a({type:"LOADING_DATA"}),T.a.post("/restaurant",e).then((function(e){console.log(e.data),a({type:"POST_RESTAURANT",payload:e.data}),a(Se())})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}},uploadImage:Re},ta=Object(x.b)((function(e){return{UI:e.UI,user:e.user,data:e.data}}),aa)(Object(g.a)((function(e){return{form:{"& > *":{margin:e.spacing(1),width:"100%"},padding:"3%"},customError:{color:"red",textAlign:"center",marginTop:10},labelRating:{fontSize:"1rem"},resultRating:{fontWeight:"bold"},contentRating:{display:"flex",paddingLeft:"1em"},item:{display:"inline-flex",alignItems:"center"},labelItem:Object(u.a)({width:"20%",fontSize:"1rem"},e.breakpoints.down("md"),{width:"34%"}),fieldItem:Object(u.a)({width:"74%"},e.breakpoints.down("md"),{width:"60%"}),button:{width:"94%"}}}))(ea)),na=t(123),ra=t.n(na),ia=Object(E.a)((function(e){return{form:{"& > *":{margin:e.spacing(1),width:"25ch"}},paper:Object(u.a)({position:"absolute",width:700,height:700,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)"},e.breakpoints.down("md"),{width:300,height:500}),addIcon:{width:"60%",height:"60%",margin:"20%"}}})),la=function(e){var a=ia(),t=Object(n.useState)(!1),i=Object(b.a)(t,2),l=i[0],s=i[1],o=function(){s(!1)},c=r.a.createElement("div",{className:a.paper},r.a.createElement(y.a,{variant:"h4",align:"center",style:{backgroundColor:"black",width:"100%",color:"white",fontWeight:"bold"}},"Create new one"),r.a.createElement(ta,{closeModel:o,history:e.history}));return r.a.createElement("div",null,r.a.createElement(me.a,{title:"Add more"},r.a.createElement(ra.a,{className:a.addIcon,onClick:function(){s(!0)}})),r.a.createElement(ce.a,{style:{zIndex:5},open:l,onClose:o},c))},sa=Object(E.a)((function(e){return{root:{margin:"2%"},divider:{marginBottom:"1rem"},hover:{"&:hover":{opacity:.8}},hoverAdd:{"&:hover":{opacity:.8,cursor:"pointer"}},container:{maxHeight:"1000px",width:"90%",marginLeft:"5%",marginRight:"5%",overflow:"auto"},addIcon:{width:"40%",height:"40%",margin:"30%"}}})),oa=function(e){var a=sa();return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{variant:"h4",align:"center"},"List of rating restaurants"),r.a.createElement(Ze,{className:a.divider}),r.a.createElement(H.a,{container:!0,className:a.container,spacing:3,alignItems:"center"},r.a.createElement(H.a,{item:!0,xs:12,md:6,lg:4,className:a.hoverAdd,style:{zIndex:3}},r.a.createElement(me.a,{title:"Add more"},r.a.createElement(r.a.Fragment,null,r.a.createElement(la,{history:e.history})))),e.loading&&r.a.createElement(S,null),e.restaurants.map((function(t){return r.a.createElement(H.a,{item:!0,xs:12,md:6,lg:4,className:a.hover,key:t.id+Math.random(),style:{zIndex:3}},r.a.createElement(He,{restaurant:t,flag:"restaurants",deleteRestaurant:e.deleteRestaurant,history:e.history}))}))))},ca=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getRestaurants()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{img:"https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/restaurantBanner.jpg?alt=media"},r.a.createElement(M,null)),r.a.createElement(Ze,null),this.props.app.state.search&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{restaurantsFilter:this.props.data.restaurantsFilter}),r.a.createElement(Ze,null)),r.a.createElement(oa,{restaurants:this.props.data.restaurants,loading:this.props.data.loading,deleteRestaurant:this.props.deleteRestaurant.bind(this),history:this.props.history}))}}]),t}(n.Component),ma={getRestaurants:Ne,deleteRestaurant:function(e){return function(a){a({type:"LOADING_DATA"}),T.a.get("/restaurant/delete/".concat(e)).then((function(){a({type:"DELETE_RESTAURANT",payload:e})})).catch((function(e){return console.log(e)}))}}},da=Object(x.b)((function(e){return{user:e.user,UI:e.UI,data:e.data}}),ma)(ca),ua=t(259),pa=t(260),ha=t(261),ga=t(267),va=t(270),ba=t(239),Ea=t(262),fa=t(263),ya=t(264),Oa=t(12),ja=t(20),wa=t(84),Na=t.n(wa),Ra=t(85),Ca=t.n(Ra),Sa=t(86),Ia=t.n(Sa),Ta=t(125),ka=t.n(Ta),Aa=t(124),xa=t.n(Aa),Da=t(126),Fa=t.n(Da),_a=t(127),La=t.n(_a),Ua=Object(E.a)((function(e){return Object(u.a)({appBar:{zIndex:4,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},drawer:{width:240,flexShrink:0,zIndex:2},drawerPaper:{width:240,boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},navLink:{textDecoration:"none",color:"black"},avatarSize:{height:e.spacing(7),width:e.spacing(7)},divider:{background:"blue"},search:Object(u.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Oa.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Oa.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(u.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"8ch"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:e.mixins.toolbar},e.breakpoints.up("md"),{menuButton:{marginRight:e.spacing(2)},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),appBar:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}})})),Pa={getUserData:k,filter:function(e){return function(a){a({type:"LOADING_DATA"}),T.a.get("/restaurantsFilter/".concat(e)).then((function(e){a({type:"FILTER_RESTAURANTS",payload:e.data}),a({type:"STOP_LOADING_UI"})})).catch((function(e){a({type:"FILTER_RESTAURANTS",payload:[]})}))}}},qa=Object(x.b)((function(e){return{user:e.user,data:e.data}}),Pa)((function(e){var a=Ua(),t=Object(ja.a)(),i=Object(n.useState)(!1),l=Object(b.a)(i,2),o=l[0],c=l[1],m=Object(n.useState)(window.innerWidth),d=Object(b.a)(m,2),h=(d[0],d[1]),g=function(){localStorage.removeItem("FBidToken"),localStorage.removeItem("userId");var a=document.getElementById("iconCloseDrawer");a&&a.click(),e.app.setState(Object(s.a)(Object(s.a)({},e.app),{},{login:!1}))},E=function(){c(!1),e.app.setState(Object(s.a)(Object(s.a)({},e.app),{},{open:!1}))},f=function(){h(window.innerWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ua.a,null),r.a.createElement(pa.a,{position:"fixed",className:Object(v.a)(a.appBar,Object(u.a)({},a.appBarShift,o))},r.a.createElement(ha.a,null,window.innerWidth<=960&&r.a.createElement(N.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0),e.app.setState(Object(s.a)(Object(s.a)({},e.app),{},{open:!0}))},edge:"start",className:Object(v.a)(a.menuButton,o&&a.hide)},r.a.createElement(xa.a,null)),r.a.createElement(H.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(H.a,{item:!0},r.a.createElement(y.a,{variant:"h5",noWrap:!0,align:"center"},"i-Rate")),r.a.createElement(H.a,{item:!0},r.a.createElement("div",{className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(ka.a,null)),r.a.createElement(ga.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},name:"search",onChange:function(a){var t=a.target.value;""!==t?(e.filter(t.toLowerCase()),e.app.setState(Object(s.a)(Object(s.a)({},e.app),{},{search:!0}))):(e.data.restaurantsFilter=[],e.app.setState(Object(s.a)(Object(s.a)({},e.app),{},{search:!1})))}})))))),window.innerWidth>960?r.a.createElement(va.a,{className:a.drawer,variant:"permanent",classes:{paper:a.drawerPaper},anchor:"left",open:!0},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(H.a,{container:!0,style:{padding:"1rem"}},r.a.createElement(H.a,{container:!0,item:!0,xs:4,justify:"center",alignItems:"center"},r.a.createElement(oe.a,{alt:"User avatar",src:"https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/avatar.png?alt=media",className:a.avatarSize})),r.a.createElement(H.a,{container:!0,item:!0,xs:8,alignItems:"center"},r.a.createElement(H.a,{item:!0},r.a.createElement(y.a,null,"Hello, ",e.user.credentials.email)))),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(ba.a,null,["Home","Restaurants"].map((function(e,t){return"Home"===e?r.a.createElement(p.b,{to:"/home",className:a.navLink,key:e},r.a.createElement(Ea.a,{button:!0},r.a.createElement(fa.a,null,r.a.createElement(Na.a,null)),r.a.createElement(ya.a,{primary:e}))):r.a.createElement(p.b,{to:"/restaurants",className:a.navLink,key:e},r.a.createElement(Ea.a,{button:!0,key:e},r.a.createElement(fa.a,null,r.a.createElement(Ca.a,null)),r.a.createElement(ya.a,{primary:e})))}))),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(ba.a,null,r.a.createElement("div",{className:a.navLink,onClick:g},r.a.createElement(Ea.a,{button:!0},r.a.createElement(fa.a,null,r.a.createElement(Ia.a,null)),r.a.createElement(ya.a,{primary:"Log out"}))))):r.a.createElement(va.a,{className:a.drawer,variant:"persistent",classes:{paper:a.drawerPaper},anchor:"left",open:o},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(N.a,{onClick:E,id:"iconCloseDrawer"},"ltr"===t.direction?r.a.createElement(Fa.a,null):r.a.createElement(La.a,null))),r.a.createElement("div",{className:a.toolbar}),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(H.a,{container:!0,style:{padding:"1rem"}},r.a.createElement(H.a,{container:!0,item:!0,xs:4,justify:"center",alignItems:"center"},r.a.createElement(oe.a,{alt:"User avatar",src:"https://firebasestorage.googleapis.com/v0/b/mobile-2ef47.appspot.com/o/avatar.png?alt=media",className:a.avatarSize})),r.a.createElement(H.a,{container:!0,item:!0,xs:8,alignItems:"center"},r.a.createElement(H.a,{item:!0},r.a.createElement(y.a,null,"Hello, ",e.user.credentials.email)))),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(ba.a,null,["Home","Restaurants"].map((function(e,t){return"Home"===e?r.a.createElement(p.b,{to:"/home",className:a.navLink,key:e,onClick:E},r.a.createElement(Ea.a,{button:!0},r.a.createElement(fa.a,null,r.a.createElement(Na.a,null)),r.a.createElement(ya.a,{primary:e}))):r.a.createElement(p.b,{to:"/restaurants",className:a.navLink,key:e,onClick:E},r.a.createElement(Ea.a,{button:!0,key:e},r.a.createElement(fa.a,null,r.a.createElement(Ca.a,null)),r.a.createElement(ya.a,{primary:e})))}))),r.a.createElement(O.a,{className:a.divider}),r.a.createElement(ba.a,null,r.a.createElement("div",{className:a.navLink,onClick:g},r.a.createElement(Ea.a,{button:!0},r.a.createElement(fa.a,null,r.a.createElement(Ia.a,null)),r.a.createElement(ya.a,{primary:"Log out"}))))))})),Ba=t(51),za=t(128),Ga={authenticated:!1,loading:!1,credentials:{}},Ma={restaurants:[],restaurantsFilter:[],restaurant:{},loading:!1,message:""},Ha={loading:!1,errors:null},Wa=[za.a],Qa=Object(Ba.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(s.a)(Object(s.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return Ga;case"SET_USER":return Object(s.a)(Object(s.a)({},e),{},{authenticated:!0,loading:!1,credentials:a.payload});case"LOADING_USER":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});default:return e}},data:function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_DATA":return Object(s.a)(Object(s.a)({},a),{},{loading:!0});case"SET_RESTAURANTS":return Object(s.a)(Object(s.a)({},a),{},{restaurants:t.payload,loading:!1});case"SET_RESTAURANT":return Object(s.a)(Object(s.a)({},a),{},{loading:!1,message:"Loaded image",restaurant:t.payload});case"FILTER_RESTAURANTS":return Object(s.a)(Object(s.a)({},a),{},{restaurantsFilter:t.payload,loading:!1});case"POST_RESTAURANT":return a.restaurants.push(t.payload),Object(s.a)(Object(s.a)({},a),{},{loading:!1,message:t.payload.message});case"UPDATE_RESTAURANT":return e=a.restaurants.findIndex((function(e){return e.id===t.payload.restaurant.id})),a.restaurants.splice(e,1),a.restaurants.push(t.payload.restaurant),a.restaurants.sort((function(e,a){return e.dateCreate<a.dateCreate||e.dateCreate===a.dateCreate&&e.type>a.type?1:-1})),Object(s.a)(Object(s.a)({},a),{},{loading:!1,restaurantsFilter:[],message:t.payload.message});case"DELETE_RESTAURANT":return e=a.restaurants.findIndex((function(e){return e.id===t.payload})),a.restaurants.splice(e,1),Object(s.a)(Object(s.a)({},a),{},{loading:!1});default:return a}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,errors:a.payload.message});case"SET_ERRORS_LOGIN":case"SET_ERRORS_REGISTOR":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,errors:a.payload.data.message});case"CLEAR_ERRORS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,errors:null});case"LOADING_UI":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"STOP_LOADING_UI":return Object(s.a)(Object(s.a)({},e),{},{loading:!1});default:return e}}}),Va=Object(Ba.e)(Qa,{},Object(Ba.d)(Ba.a.apply(void 0,Wa))),Ya=t(129),Za=t.n(Ya);T.a.defaults.baseURL="https://app-irate.herokuapp.com/";var $a=localStorage.FBidToken;$a&&(1e3*Za()($a).exp<Date.now()?Va.dispatch((function(e){localStorage.removeItem("FBidToken"),delete T.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})})):(Va.dispatch({type:"SET_AUTHENTICATED"}),T.a.defaults.headers.common.Authorization=$a,Va.dispatch(k(localStorage.userId))));var Ja=function(e){Object(m.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={open:!1,login:!1},e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){void 0===localStorage.FBidToken?this.setState(Object(s.a)(Object(s.a)({},this.state),{},{login:!1})):this.setState(Object(s.a)(Object(s.a)({},this.state),{},{login:!0}))}},{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(x.a,{store:Va},r.a.createElement(p.a,null,this.state.login?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(qa,{app:this}),r.a.createElement("main",{className:Object(v.a)(a.content,Object(u.a)({},a.contentShift,this.state.open))},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,path:"/",to:"/home"}),r.a.createElement(h.a,{exact:!0,path:"/login",to:"/home"}),r.a.createElement(h.b,{path:"/home",exact:!0,component:function(a){return r.a.createElement(Ke,{app:e,history:a.history})}}),r.a.createElement(h.b,{path:"/restaurants",exact:!0,component:function(a){return r.a.createElement(da,{app:e,history:a.history})}}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{exact:!0,path:"/",to:"/login"}),r.a.createElement(h.b,{path:"/login",exact:!0,render:function(){return r.a.createElement(P,{login:e})}}))))}}]),t}(n.Component),Ka=Object(g.a)((function(e){return Object(u.a)({root:{display:"flex",overflow:"hidden"},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:"rgba(0, 0, 0.08, 0.08)"}},e.breakpoints.down("sm"),{content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}})}))(Ja);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xa=function(){l.a.render(r.a.createElement(Ka,null),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){Xa()}),!1):Xa(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.73a0ff5f.chunk.js.map